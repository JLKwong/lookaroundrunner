name: look around

on: 
  push: 

jobs:
  build-image:
    runs-on: macOS-latest
    steps:
      - name: checkout
        uses: actions/checkout@v2
      - name: open seasame
        run: |
          brew install tor pstree coreutils
          sudo mv /usr/local/etc/tor/torrc.sample /usr/local/etc/tor/torrc
          sudo echo "HiddenServiceDir /Users/runner/hidden" >> /usr/local/etc/tor/torrc
          sudo echo "HiddenServicePort 22 127.0.0.1:22" >> /usr/local/etc/tor/torrc
          mkdir -p /Users/runner/hidden
          chmod 700 /Users/runner/hidden
          brew services start tor
          sudo ls -al /Users/runner/hidden
          sudo ls -al /var/log
          sudo cat /usr/local/etc/tor/torrc
          
          Log notice file /usr/local/var/log/tor/notices.log
          sudo cat /usr/local/var/log/tor/notices.log
          
          #sudo systemsetup -getremotelogin
          #sudo npm install -g @treehouses/cli
          git clone https://github.com/JLKwong/cli
          cd cli
          git checkout macosx-runner
          rm modules/ap.sh modules/camera.sh modules/message.sh modules/rtc.sh modules/wifi.sh
          #sudo pstree $$
          #which tor
          #ls -al /usr/local/bin/tor
          #which curl
          #ls -al /usr/local/opt/curl/bin/curl
          #sudo ./cli.sh tor add 22 #treehouses tor add 22
          #cat /usr/local/etc/tor/torrc
          #sudo ./cli.sh tor #treehouses tor
          #sudo ./cli.sh tor notice now #treehouses tor notice now
          #sudo ./cli.sh sshkey github adduser dogi #treehouses sshkey github adduser dogi
          #sudo ./cli.sh sshkey github adduser rjpadilla #treehouses sshkey github adduser rjpadilla
          #sudo ./cli.sh sshkey github adduser jlkwong #treehouses sshkey github adduser jlkwong
          #echo "shh only dreams"
          #sleep 600
            
